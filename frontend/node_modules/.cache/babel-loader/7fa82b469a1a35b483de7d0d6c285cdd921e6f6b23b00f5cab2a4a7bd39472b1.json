{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Nicolas\\\\OneDrive\\\\Documentos\\\\8vo Semestre\\\\Software I\\\\Seed_Store_Microservice\\\\frontend\\\\src\\\\components\\\\sowing\\\\RegisterSowing.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { registerSowing } from \"../../services/sowingService\";\nimport { getAllSeeds } from \"../../services/seedService\";\nimport { getAllContacts } from \"../../services/contactService\";\nimport \"../../styles/SowingModal.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function RegisterSowing({\n  onClose,\n  onSaved\n}) {\n  _s();\n  const [seeds, setSeeds] = useState([]);\n  const [contacts, setContacts] = useState([]);\n  const [form, setForm] = useState({\n    seedId: \"\",\n    quantity: \"\",\n    startDate: \"\",\n    harvestDate: \"\",\n    observations: \"\",\n    fumigationFrequency: \"\",\n    contactId: \"\" // <-- nuevo\n  });\n  useEffect(() => {\n    loadSeeds();\n    loadContacts();\n  }, []);\n  const loadSeeds = async () => {\n    const res = await getAllSeeds();\n    setSeeds(res.data);\n  };\n  const loadContacts = async () => {\n    const res = await getAllContacts();\n    setContacts(res.data);\n  };\n  const handleChange = e => setForm({\n    ...form,\n    [e.target.name]: e.target.value\n  });\n  const handleSave = async () => {\n    if (!form.seedId || !form.startDate) {\n      alert(\"Debe seleccionar una semilla y la fecha de inicio\");\n      return;\n    }\n    const payload = {\n      seedId: Number(form.seedId),\n      quantity: Number(form.quantity || 0),\n      startDate: form.startDate,\n      harvestDate: form.harvestDate || null,\n      observations: form.observations,\n      fumigationFrequency: Number(form.fumigationFrequency || 0),\n      status: \"Sembrada\",\n      contactId: form.contactId ? Number(form.contactId) : null\n    };\n    try {\n      await registerSowing(payload);\n      onSaved();\n    } catch (error) {\n      console.error(\"❌ Error registrando siembra:\", error);\n      alert(\"Ocurrió un error al registrar la siembra\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal-bg\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Registrar Siembra\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Seleccione una semilla\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"seedId\",\n        onChange: handleChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Seleccione la semilla\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), seeds.map(seed => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: seed.id,\n          children: [seed.plantName, \" \", seed.variety, \" - (\", seed.quantity, \" disponibles)\"]\n        }, seed.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"quantity\",\n        type: \"number\",\n        placeholder: \"Cantidad\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Fecha inicio\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"startDate\",\n        type: \"date\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Fecha cosecha\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"harvestDate\",\n        type: \"date\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"observations\",\n        placeholder: \"Observaciones\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"fumigationFrequency\",\n        type: \"number\",\n        placeholder: \"Frecuencia fumigaci\\xF3n (d\\xEDas)\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Contacto (opcional, para apartar)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"contactId\",\n        onChange: handleChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Sin contacto (Disponible)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), contacts.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: c.id,\n          children: [c.name, \" - \", c.identification]\n        }, c.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-save\",\n        onClick: handleSave,\n        children: \"Guardar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-cancel\",\n        onClick: onClose,\n        children: \"Cancelar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n_s(RegisterSowing, \"6Snp7NGS4rGlpn/yrJZcw20Dk40=\");\n_c = RegisterSowing;\nvar _c;\n$RefreshReg$(_c, \"RegisterSowing\");","map":{"version":3,"names":["React","useState","useEffect","registerSowing","getAllSeeds","getAllContacts","jsxDEV","_jsxDEV","RegisterSowing","onClose","onSaved","_s","seeds","setSeeds","contacts","setContacts","form","setForm","seedId","quantity","startDate","harvestDate","observations","fumigationFrequency","contactId","loadSeeds","loadContacts","res","data","handleChange","e","target","name","value","handleSave","alert","payload","Number","status","error","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","map","seed","id","plantName","variety","type","placeholder","c","identification","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Nicolas/OneDrive/Documentos/8vo Semestre/Software I/Seed_Store_Microservice/frontend/src/components/sowing/RegisterSowing.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { registerSowing } from \"../../services/sowingService\";\r\nimport { getAllSeeds } from \"../../services/seedService\";\r\nimport { getAllContacts } from \"../../services/contactService\";\r\nimport \"../../styles/SowingModal.css\";\r\n\r\nexport default function RegisterSowing({ onClose, onSaved }) {\r\n  const [seeds, setSeeds] = useState([]);\r\n  const [contacts, setContacts] = useState([]);\r\n\r\n  const [form, setForm] = useState({\r\n    seedId: \"\",\r\n    quantity: \"\",\r\n    startDate: \"\",\r\n    harvestDate: \"\",\r\n    observations: \"\",\r\n    fumigationFrequency: \"\",\r\n    contactId: \"\"        // <-- nuevo\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadSeeds();\r\n    loadContacts();\r\n  }, []);\r\n\r\n  const loadSeeds = async () => {\r\n    const res = await getAllSeeds();\r\n    setSeeds(res.data);\r\n  };\r\n\r\n  const loadContacts = async () => {\r\n    const res = await getAllContacts();\r\n    setContacts(res.data);\r\n  };\r\n\r\n  const handleChange = (e) =>\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n\r\n  const handleSave = async () => {\r\n    if (!form.seedId || !form.startDate) {\r\n      alert(\"Debe seleccionar una semilla y la fecha de inicio\");\r\n      return;\r\n    }\r\n\r\n    const payload = {\r\n      seedId: Number(form.seedId),\r\n      quantity: Number(form.quantity || 0),\r\n      startDate: form.startDate,\r\n      harvestDate: form.harvestDate || null,\r\n      observations: form.observations,\r\n      fumigationFrequency: Number(form.fumigationFrequency || 0),\r\n      status: \"Sembrada\",\r\n      contactId: form.contactId ? Number(form.contactId) : null\r\n    };\r\n\r\n    try {\r\n      await registerSowing(payload);\r\n      onSaved();\r\n    } catch (error) {\r\n      console.error(\"❌ Error registrando siembra:\", error);\r\n      alert(\"Ocurrió un error al registrar la siembra\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"modal-bg\">\r\n      <div className=\"modal-box\">\r\n        <h2>Registrar Siembra</h2>\r\n\r\n        <label>Seleccione una semilla</label>\r\n        <select name=\"seedId\" onChange={handleChange}>\r\n          <option value=\"\">Seleccione la semilla</option>\r\n          {seeds.map(seed => (\r\n            <option key={seed.id} value={seed.id}>\r\n              {seed.plantName} {seed.variety} - ({seed.quantity} disponibles)\r\n            </option>\r\n          ))}\r\n        </select>\r\n\r\n        <input name=\"quantity\" type=\"number\" placeholder=\"Cantidad\" onChange={handleChange} />\r\n\r\n        <label>Fecha inicio</label>\r\n        <input name=\"startDate\" type=\"date\" onChange={handleChange} />\r\n\r\n        <label>Fecha cosecha</label>\r\n        <input name=\"harvestDate\" type=\"date\" onChange={handleChange} />\r\n\r\n        <textarea name=\"observations\" placeholder=\"Observaciones\" onChange={handleChange} />\r\n\r\n        <input\r\n          name=\"fumigationFrequency\"\r\n          type=\"number\"\r\n          placeholder=\"Frecuencia fumigación (días)\"\r\n          onChange={handleChange}\r\n        />\r\n\r\n        <label>Contacto (opcional, para apartar)</label>\r\n        <select name=\"contactId\" onChange={handleChange}>\r\n          <option value=\"\">Sin contacto (Disponible)</option>\r\n          {contacts.map(c => (\r\n            <option key={c.id} value={c.id}>\r\n              {c.name} - {c.identification}\r\n            </option>\r\n          ))}\r\n        </select>\r\n\r\n        <button className=\"btn-save\" onClick={handleSave}>Guardar</button>\r\n        <button className=\"btn-cancel\" onClick={onClose}>Cancelar</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}